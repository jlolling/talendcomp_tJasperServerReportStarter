<COMPONENT>

  <HEADER
    PLATEFORM="ALL"
    SERIAL=""
    VERSION="2.2"
    STATUS="PROD"
    
    COMPATIBILITY="ALL"
    AUTHOR="cimt ag"
    RELEASE_DATE="20161201"
    STARTABLE="true"
  >
    <SIGNATURE />
  </HEADER>

  <FAMILIES>
    <FAMILY>Business_Intelligence/Jasper</FAMILY>
  </FAMILIES>

  <DOCUMENTATION>
    <URL>
    http://jan-lolling.de/talend/components/help/tJasperServerReportStarter.pdf
    </URL>
  </DOCUMENTATION>

  <CONNECTORS>
    <CONNECTOR CTYPE="ITERATE" MAX_OUTPUT="0" MAX_INPUT="1" />
    <CONNECTOR CTYPE="SUBJOB_OK" MAX_INPUT="1" MAX_OUTPUT="1"/>
    <CONNECTOR CTYPE="SUBJOB_ERROR" MAX_INPUT="1" MAX_OUTPUT="1"/>
    <CONNECTOR CTYPE="COMPONENT_OK" />
    <CONNECTOR CTYPE="COMPONENT_ERROR" />
    <CONNECTOR CTYPE="RUN_IF" />
  </CONNECTORS>

  <PARAMETERS>

    <PARAMETER NAME="SERVICE_SCHEDULER_URL" FIELD="TEXT" NUM_ROW="1" REQUIRED="true">
      <DEFAULT>"http://localhost:8080/jasperserver/services/ReportScheduler"</DEFAULT>
    </PARAMETER>
    
    <PARAMETER NAME="SERVICE_USER" FIELD="TEXT" NUM_ROW="10" REQUIRED="true">
      <DEFAULT>"jasperadmin"</DEFAULT>
    </PARAMETER>
    
	<PARAMETER NAME="SERVICE_PASSWORD" FIELD="TEXT" NUM_ROW="10" REQUIRED="true">
	  <DEFAULT>"jasperadmin"</DEFAULT>
	</PARAMETER> 

    <PARAMETER NAME="REPORT_URI" FIELD="TEXT" NUM_ROW="30" REQUIRED="true">
      <DEFAULT>"/reports/samples/Department"</DEFAULT>
    </PARAMETER>

	<PARAMETER NAME="OUTPUT_TYPE" FIELD="CLOSED_LIST" NUM_ROW="35" REQUIRED="true">
    	<ITEMS DEFAULT="PDF">
    		<ITEM NAME="HTML" VALUE="HTML" />
    		<ITEM NAME="PDF" VALUE="PDF" />
    		<ITEM NAME="XLS" VALUE="XLS" />
    		<ITEM NAME="XLSX" VALUE="XLSX" />
    		<ITEM NAME="CSV" VALUE="CSV" />
    		<ITEM NAME="RTF" VALUE="RTF" />
    		<ITEM NAME="TEXT" VALUE="TXT" />
    		<ITEM NAME="ODT" VALUE="ODT" />
    		<ITEM NAME="DOCX" VALUE="DOCX" />
    	</ITEMS>
    </PARAMETER>

    <PARAMETER NAME="OUTPUT_LOCALE" FIELD="TEXT" NUM_ROW="35" >
      <DEFAULT>"en_UK"</DEFAULT>
    </PARAMETER>

    <PARAMETER NAME="OUTPUT_FILENAME" FIELD="TEXT" NUM_ROW="40" REQUIRED="true">
      <DEFAULT>"Department"</DEFAULT>
    </PARAMETER>
    
    <PARAMETER NAME="OUTPUT_DESC" FIELD="TEXT" NUM_ROW="41" >
      <DEFAULT>"Triggered by an ETL job"</DEFAULT>
    </PARAMETER>

    <PARAMETER NAME="OVERWRITE_FILES" FIELD="CHECK" NUM_ROW="45" >
    	<DEFAULT>true</DEFAULT>
    </PARAMETER>
    
    <PARAMETER NAME="SEQUENTIAL_FILENAMES" FIELD="CHECK" NUM_ROW="47" >
    	<DEFAULT>true</DEFAULT>
    </PARAMETER>

    <PARAMETER NAME="TIMESTAMP_PATTERN" FIELD="TEXT" NUM_ROW="47" REQUIRED="true" SHOW_IF="SEQUENTIAL_FILENAMES == 'true'">
    	<DEFAULT>"yyyyMMdd_HHmmss"</DEFAULT>
    </PARAMETER>

    <PARAMETER NAME="OUTPUT_DEST_URI" FIELD="TEXT" NUM_ROW="50" REQUIRED="true">
      <DEFAULT>"/reports/samples"</DEFAULT>
    </PARAMETER>

    <PARAMETER NAME="MAIL_NOTIFICATION" FIELD="CHECK" NUM_ROW="80" >
    	<DEFAULT>false</DEFAULT>
    </PARAMETER>

    <PARAMETER NAME="MAIL_NOTIFICATION_SKIP_EMPTY" FIELD="CHECK" NUM_ROW="80" SHOW_IF="MAIL_NOTIFICATION == 'true'">
      <DEFAULT>false</DEFAULT>
    </PARAMETER>

    <PARAMETER NAME="SEND_MAIL_ATTACHMENT" FIELD="CHECK" NUM_ROW="80" SHOW_IF="MAIL_NOTIFICATION == 'true'">
      <DEFAULT>true</DEFAULT>
    </PARAMETER>

    <PARAMETER NAME="MAIL_ADDRESSES" FIELD="TEXT" NUM_ROW="90" REQUIRED="true" SHOW_IF="MAIL_NOTIFICATION == 'true'">
      <DEFAULT>"name1@example.com;name2@server.com"</DEFAULT>
    </PARAMETER>

    <PARAMETER NAME="MAIL_SUBJECT" FIELD="TEXT" NUM_ROW="95" REQUIRED="true" SHOW_IF="MAIL_NOTIFICATION == 'true'">
      <DEFAULT>"Type Subject here"</DEFAULT>
    </PARAMETER>

    <PARAMETER NAME="MAIL_MESSAGE" FIELD="MEMO_MESSAGE" NB_LINES="5" NUM_ROW="100" SHOW_IF="MAIL_NOTIFICATION == 'true'">
      <DEFAULT>"Add the message here"</DEFAULT>
    </PARAMETER>

 	<PARAMETER NAME="REPORT_PARAMS" FIELD="TABLE" NUM_ROW="120" NB_LINES="6">
      <ITEMS>
        <ITEM NAME="PARAM_NAME" FIELD="String" VALUE='"parameterName"'/>
        <ITEM NAME="PARAM_VALUE" FIELD="String" VALUE='"parameterValue"'/>
		<ITEM NAME="PARAM_TYPE" VALUE="String" FIELD="CLOSED_LIST">
			<ITEMS DEFAULT="NoConversion">
        		<ITEM NAME="NoConversion"  	VALUE="NoConversion"/>
        		<ITEM NAME="BigDecimal"  	VALUE="BigDecimal"/>
        		<ITEM NAME="Boolean"  		VALUE="Boolean"/>
        		<ITEM NAME="Date" 			VALUE="Date"/>
        		<ITEM NAME="Double"			VALUE="Double"/>
        		<ITEM NAME="Float" 			VALUE="Float"/>
        		<ITEM NAME="Int" 			VALUE="Int"/>
        		<ITEM NAME="Long" 			VALUE="Long"/>
        		<ITEM NAME="String" 		VALUE="String"/>
        		<ITEM NAME="Timestamp" 		VALUE="Timestamp"/>
        	</ITEMS>
		</ITEM>
        <ITEM NAME="PARAM_IS_COLLECTION" FIELD="CHECK"/>
      </ITEMS>
	</PARAMETER>
    
    <PARAMETER NAME="COLLECTION_DELIMITER" FIELD="TEXT" NUM_ROW="139">
      <DEFAULT>"|"</DEFAULT>
    </PARAMETER>
    
    <PARAMETER NAME="CONVERSION_PATTERN" FIELD="TEXT" NUM_ROW="139">
      <DEFAULT>"yyyy-MM-dd"</DEFAULT>
    </PARAMETER>

    <PARAMETER NAME="START_TIME_DELAY_IN_SECONDS" FIELD="TEXT" NUM_ROW="150">
      <DEFAULT>10</DEFAULT>
    </PARAMETER>

  </PARAMETERS>

  <ADVANCED_PARAMETERS>
		<PARAMETER NAME="VERSION" FIELD="LABEL" COLOR="0;0;0"
			NUM_ROW="200">
			<DEFAULT>Version 2.2</DEFAULT>
		</PARAMETER>
  </ADVANCED_PARAMETERS>

  <CODEGENERATION>
	<IMPORTS>
      <IMPORT NAME="cimt-talendcomp-jasperservsched" MODULE="cimt-talendcomp-jasperservsched-2.2.jar" REQUIRED="true" />  
    </IMPORTS>
  </CODEGENERATION>

  <RETURNS>
    <RETURN NAME="JOB_ID" TYPE="id_Long" AVAILABILITY="AFTER" />
    <RETURN NAME="REPORT_URI" TYPE="id_String" AVAILABILITY="AFTER" />
    <RETURN NAME="OUTPUT_FILENAME" TYPE="id_String" AVAILABILITY="AFTER" />
    <RETURN NAME="DEST_URI" TYPE="id_String" AVAILABILITY="AFTER" />  
  </RETURNS>

</COMPONENT>